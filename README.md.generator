#!/bin/bash

# README.md.generator - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ README.md –≤ —Ä–µ–ø–æ–∑–∏—Ç–∞—Ä–∏–∏.
# –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω –∏—Å–∫—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–∞—Ä–∏—è!
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ —Ä–µ–ø–æ–∑–∏—Ç–∞—Ä–∏—è.
# –í–Ω–∏–º–∞–Ω–∏–µ! –§–∞–π–ª README.md –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.

# -----------------------------------------------------------------------------
# –§—É–Ω–∫—Ü–∏—è main
# –≥–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞
#
# –ê—Ä–≥—É–º–µ–Ω—Ç—ã: –Ω–µ—Ç
# –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: –Ω–µ—Ç
# -----------------------------------------------------------------------------
function main {

    local i

    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–∞–∑–¥–µ–ª –û–ø–∏—Å–∞–Ω–∏–µ
    echo "# –û–ø–∏—Å–∞–Ω–∏–µ"
    echo ""
    for i in $(git ls-files *.bash); do
        sed -nE '2 s/^(abs.*\.bash)(\ -\ .*)$/**\1**\2<br\/>\n/p' <(./"$i" --help)
    done
    echo ""

    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–∞–∑–¥–µ–ª –£—Å—Ç–∞–Ω–æ–≤–∫–∞
    cat <<EOF
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞

***.bash** —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ –æ–¥–Ω–æ–º –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π \$PATH<br/>
***-completion** - —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ bash - —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ /etc/bash_completion.d/ (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Fedora 40)<br/>


EOF

    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–∞–∑–¥–µ–ª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
    echo "# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ"
    echo ""
    for i in $(git ls-files *.bash); do
        echo "## $i"
        echo '```'
        tail -n +6 <(./"$i" --help)
        echo -e '```\n'
    done
    echo ""

    return 0
} # main



# *************************************************************************************************************************************************************
# * –°–∞–º —Å–∫—Ä–∏–ø—Ç üòä
# *************************************************************************************************************************************************************

main "$@" >README.md
exit $?

# *************************************************************************************************************************************************************
